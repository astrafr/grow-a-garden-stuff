<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Grow-A-Garden Tracker</title>
  <style>
    /* (Same CSS as before, including #seed-shop-timer styling) */
    /* Add this if not present: */
    #seed-shop-timer {
      font-size: 1.2rem;
      color: #bca0ff;
      margin-bottom: 1rem;
      text-shadow: 0 0 6px #6f42c1;
    }
  </style>
</head>
<body>
<h1>ðŸŒ± Grow-A-Garden Tracker</h1>
<div id="restock-timer">0</div>
<div id="seed-shop-timer">ðŸŒ¾ Seed shop restocks in: Loading...</div>
<!-- (Your buttons, content wrapper, etc. remain unchanged) -->
<script>
  const API_URL = 'https://corsproxy.io/?https://gagstock.gleeze.com/grow-a-garden';

  function parseCountdown(str) {
    if (!str) return 0;
    const parts = str.split(':').map(Number);
    if (parts.length !== 3 || parts.some(isNaN)) return 0;
    return parts[0]*3600 + parts[1]*60 + parts[2];
  }

  function formatTime(secs) {
    const h = String(Math.floor(secs / 3600)).padStart(2, '0');
    const m = String(Math.floor((secs % 3600) / 60)).padStart(2, '0');
    const s = String(secs % 60).padStart(2, '0');
    return `${h}:${m}:${s}`;
  }

  async function fetchData() {
    const res = await fetch(API_URL);
    if (!res.ok) throw new Error(res.status);
    return (await res.json()).data;
  }

  let globalRestock = 0;
  let seedRestock = 0;

  async function updateData() {
    try {
      const data = await fetchData();

      // 1. Global restock using restock_seconds
      const secsList = [
        ...data.seed.items.map(i => i.restock_seconds),
        ...data.gear.items.map(i => i.restock_seconds)
      ].filter(n => typeof n === 'number' && n >= 0);
      globalRestock = secsList.length ? Math.min(...secsList) : 0;

      // 2. Seed shop countdown via countdown field
      seedRestock = parseCountdown(data.seed.countdown);

      // Update timers immediately
      document.getElementById('restock-timer').textContent = formatTime(globalRestock);
      document.getElementById('seed-shop-timer').textContent = 
        seedRestock > 0
          ? `ðŸŒ¾ Seed shop restocks in: ${formatTime(seedRestock)}`
          : 'ðŸŒ¾ No upcoming seed restock';

      // [Insert your existing render(currentData) logic here]

    } catch (err) {
      console.error(err);
      document.getElementById('error').textContent = 'Error loading data';
    }
  }

  setInterval(() => {
    globalRestock = Math.max(0, globalRestock - 1);
    seedRestock = Math.max(0, seedRestock - 1);
    document.getElementById('restock-timer').textContent = formatTime(globalRestock);
    document.getElementById('seed-shop-timer').textContent = seedRestock > 0
      ? `ðŸŒ¾ Seed shop restocks in: ${formatTime(seedRestock)}`
      : 'ðŸŒ¾ No upcoming seed restock';
  }, 1000);

  setInterval(updateData, 10000);
  updateData(); // initial call
</script>
</body>
</html>
